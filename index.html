<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Collage Enquiry Chatbot</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="custom-cursor"></div>
    <div class="chatbot-container">
      <header id="header">
        <h1>Collage Enquiry Chatbot</h1>
      </header>
      <main
        id="conversation"
        aria-live="polite"
        aria-relevant="additions"
      ></main>
      <form id="input-form" autocomplete="off">
        <input
          id="input-field"
          type="text"
          placeholder="Type your message here..."
          required
          aria-label="Message input"
        />
        <button id="submit-button" type="submit" aria-label="Send message">
          Send
        </button>
      </form>
    </div>
    <script>
      const form = document.getElementById("input-form");
      const input = document.getElementById("input-field");
      const conversation = document.getElementById("conversation");
      // Only replies in binary!
      function randomBinaryString(length = 8) {
        let out = "";
        for (let i = 0; i < length; i++) {
          out += Math.round(Math.random());
        }
        return out;
      }
      function addMessage(sender, text) {
        const messageDiv = document.createElement("div");
        messageDiv.className =
          sender === "user" ? "user-message" : "bot-message";
        const bubble = document.createElement("p");
        bubble.className = "message-bubble";
        bubble.style.whiteSpace = "pre-wrap";
        bubble.textContent = text;
        messageDiv.appendChild(bubble);
        conversation.appendChild(messageDiv);
        conversation.scrollTo({
          top: conversation.scrollHeight,
          behavior: "smooth",
        });
      }
      form.onsubmit = function (e) {
        e.preventDefault();
        const msg = input.value.trim();
        if (!msg) return;
        addMessage("user", msg);
        input.value = "";
        input.disabled = true;
        setTimeout(() => {
          // Respond with a binary string twice the user message length, max 32 bits
          const len = Math.min(msg.length * 2, 32);
          addMessage("bot", randomBinaryString(len));
          input.disabled = false;
          input.focus();
        }, 700);
      };
      // --- Custom cursor and rotation ---
      const cursor = document.getElementById("custom-cursor");
      document.body.addEventListener("mousemove", (e) => {
        cursor.style.left = e.clientX + "px";
        cursor.style.top = e.clientY + "px";
        const rotation = (Date.now() / 10.0) % 360;
        cursor.style.transform = `translate(-350%, -360%) rotate(${rotation}deg)`;
      });
      document.body.addEventListener("mouseenter", () => {
        cursor.style.display = "block";
      });
      document.body.addEventListener("mouseleave", () => {
        cursor.style.display = "none";
      });
      // --- Color randomization ---
      function getRandomColor() {
        let letters = "0123456789ABCDEF";
        let color = "#";
        for (let i = 0; i < 6; i++) {
          color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
      }
      function randomizeColors() {
        document.body.style.background = `linear-gradient(135deg, ${getRandomColor()} 0%, ${getRandomColor()} 100%)`;
        const header = document.getElementById("header");
        header.style.backgroundColor = getRandomColor();
        header.style.color = getRandomColor();
        const chatbotContainer = document.querySelector(".chatbot-container");
        chatbotContainer.style.backgroundColor = getRandomColor();
        chatbotContainer.style.borderRadius =
          Math.floor(Math.random() * 20 + 5) + "px";
        const conversationEl = document.getElementById("conversation");
        conversationEl.style.backgroundColor = getRandomColor();
        const userMessages = document.querySelectorAll(
          ".user-message .message-bubble"
        );
        userMessages.forEach((msg) => {
          msg.style.backgroundColor = getRandomColor();
          msg.style.color = getRandomColor();
          msg.style.boxShadow = `0 3px 10px ${getRandomColor()}`;
        });
        const botMessages = document.querySelectorAll(
          ".bot-message .message-bubble"
        );
        botMessages.forEach((msg) => {
          msg.style.backgroundColor = getRandomColor();
          msg.style.color = getRandomColor();
          msg.style.boxShadow = `0 3px 10px ${getRandomColor()}`;
        });
        const inputField = document.getElementById("input-field");
        inputField.style.backgroundColor = getRandomColor();
        inputField.style.color = getRandomColor();
        inputField.style.borderColor = getRandomColor();
        const submitButton = document.getElementById("submit-button");
        submitButton.style.backgroundColor = getRandomColor();
        submitButton.style.color = getRandomColor();
        cursor.style.background = getRandomColor();
      }
      setInterval(randomizeColors, 3000);
      randomizeColors();
    </script>
  </body>
</html>
